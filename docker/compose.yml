# See - https://www.influxdata.com/blog/running-influxdb-2-0-and-telegraf-using-docker/
networks:
    default:
        driver: bridge

services:
    influxdb3-core:
        container_name: influxdb3-core
        image: quay.io/influxdb/influxdb3-core:latest
        ports:
            - "8181:8181"
        command:
            - serve
            - --node-id=node0
            - --log-filter=debug
            - --object-store=file
            - --data-dir=/var/lib/influxdb3
        restart: unless-stopped

    mlflow:
        image: ghcr.io/mlflow/mlflow:latest
        container_name: mlflow
        restart: unless-stopped
        ports:
            - "5000:5000"
        volumes:
            - ./mlruns:/mlruns:Z
        command: >
            bash -c "
            mlflow server
            --host 0.0.0.0
            --port 5000"
